// Object storing questions for older kids 9-11
var quizQuestions1 = {
  social: [
    [
      "Q1: What is the best way to help someone who is feeling sad?",
      "Ignore them",
      "Tease them",
      "Tell them to cheer up",
      "Ask them whats wrong",
      "D",
      "Unlucky, the answer is ask them whats wrong",
    ],
    [
      "Q2: What is a way to show respect to others?",
      "Being helpful",
      "Being polite",
      "Listening",
      "All of these ",
      "D",
      "Almost, the answer is all of these",
    ],
    [
      "Q3: What is the best way to deal with bullying?",
      "Tell someone",
      "Fight back",
      "Suffer silently",
      "Do nothing",
      "A",
      "Not quite, the answer is tell someone",
    ],
    [
      "Q4: If you have had an argument with someone what is the best way of resolving it?",
      "Fisticuffs",
      "Get revenge",
      "Ignore them",
      "Talk to them",
      "D",
      "The answer is talk to them",
    ],
    [
      "Q5: What is something you can do to help make your community a better place?",
      "Pick up litter",
      "Be kind to others",
      "Volunteering",
      "All of these",
      "D",
      "Almost, the answer is all of these",
    ],
  ],
  maths: [
    [
      "Q1: What is the next number in the sequence: 2, 4, 6, 8, __?",
      "9",
      "11",
      "10",
      "12",
      "C",
      "Thats not right, the answer is 10",
    ],
    [
      "Q2: What is 10 + 15?",
      "25",
      "30",
      "35",
      "1015",
      "A",
      "The correct answer is 25",
    ],
    [
      "Q3: What is 3 x 3",
      "33",
      "9",
      "10",
      "12",
      "B",
      "Unlucky the correct answer is 4",
    ],
    [
      "Q4: If you have 12 apples and you give away 2, how many apples do you have left?",
      "9",
      "8",
      "11",
      "10",
      "C",
      "The correct answer is 10",
    ],
    [
      "Q5: What is 10 divided by 2?",
      "5",
      "2",
      "8",
      "6",
      "A",
      "Close but the correct answer is 5",
    ],
  ],
  english: [
    [
      "Q1: Which of the following is a noun?",
      "Book",
      "Brave",
      "Red",
      "Angry",
      "A",
      "Unlucky the answer is book",
    ],
    [
      "Q2: Which of the following is a verb?",
      "Beautiful",
      "Jumps",
      "Happy",
      "Red",
      "B",
      "Not quite, the answer is jumps",
    ],
    [
      "Q3: Which of the following is the correct spelling?",
      "Neccessary",
      "Nessecary",
      "Necessary",
      "Necisary",
      "C",
      "Unlucky, the correct answer is necessary",
    ],
    [
      "Q4: What is the plural of cat?",
      "Cat",
      "Cats",
      "Catts",
      "Catses",
      "B",
      "The correct answer is cats",
    ],
    [
      "Q5: How many letters are there in the alphabet?",
      "20",
      "22",
      "25",
      "26",
      "D",
      "The correct answer is 26",
    ],
  ],
  health: [
    [
      "Q1: What is a good way to stay healthy?",
      "Eat junk food",
      "Exercise regularly",
      "Stay up late",
      "Watch TV",
      "B",
      "Thats not right, the correct answer is exercise reguilarly",
    ],
    [
      "Q2: What is a good way to stay safe online?",
      "Dont talk to strangers ever",
      "Don't share personal information",
      "Dont open unknown attachments",
      "All of these answers are correct",
      "D",
      "Almost, the answer is all of the answers",
    ],
    [
      "Q3: What must you do before starting any exercise?",
      "Warm up",
      "Cool down",
      "Go cold",
      "Wake up",
      "A",
      "The correct answer is warm up",
    ],
    [
      "Q4: What type of footwear is best when exercising ",
      "Sandals",
      "Boots",
      "Trainers",
      "Slippers",
      "C",
      "The correct answer is trainers",
    ],
    [
      "Q5: What must you never do around the edge of a swimming pool?",
      "Run",
      "Talk",
      "Walk",
      "Sing",
      "A",
      "Not quite, the correct answer is run",
    ],
  ],
  history: [
    [
      "Q1: What is the name of the building where Scottish parliament is held?",
      "Westminter Abbey",
      "Scottish Parliament Building",
      "House of lords",
      "City Chambers",
      "B",
      "The correct answer is the Scottish PaliamENT bUILDING",
    ],
    [
      "Q2: Who led the Scottish army to victory at the Battle of Bannockburn in 1314??",
      "William Wallace",
      "Robert the Bruce",
      "Mary Queen of Scots",
      "Nicola Sturgeon",
      "B",
      "The correct answer is Robert the Bruce",
    ],
    [
      "Q3: What is the highest mountain in the British Isles?",
      "Conic Hill",
      "Ben Lomond",
      "Ben Nevis",
      "Everest",
      "C",
      "Thats not right, the correct answer is Ben Nevis",
    ],
    [
      "Q4: What is the national flower of Scotland?",
      "Thistle",
      "Daffodil",
      "Rose",
      "Lily",
      "A",
      "The answer is thistle",
    ],
    [
      "Q5: What is the name of the Scottish national flag?",
      "Saltire",
      "Union Jack",
      "Unicorn",
      "Thistle",
      "A",
      "The correct answer is the Saltire",
    ],
  ],
};

// Object storing questions for younger kids 5-8
var quizQuestions = {
  social: [
    [
      "Q1: Which of the below would make you feel scared?",
      "Loud Noise",
      "Playing",
      "Rainbows",
      "Bunny Rabbits",
      "A",
      "The answer is loud noises",
    ],
    [
      "Q2: Which of the below is an act of kindness?",
      "Snatching",
      "Helping Others",
      "Stealing",
      "Pushing in",
      "B",
      "Thats not right, the correct answer is helping others",
    ],
    [
      "Q3: Who should you treat respectfully?",
      "Parents",
      "Teachers",
      "Friends",
      "Everybody",
      "D",
      "Not quite, you should treat everybody with respect",
    ],
    [
      "Q4: If someone is feeling sad how can you help",
      "Ignore them",
      "Do nothing",
      "Ask them to play",
      "Duck Duck Goose",
      "C",
      "The correct answer is ask them to play",
    ],
    [
      "Q5: If someone looks different to you, you should...",
      "Treat them the same",
      "Treat them differently",
      "Just stare at them",
      "Run away from them",
      "A",
      "Thats not right, the answer is treat them the same",
    ],
  ],
  english: [
    [
      "Q1: What colour is the sky?",
      "White",
      "Blue",
      "Green",
      "Red",
      "B",
      "Unlucky the correct answer is blue",
    ],
    [
      "Q2: What sound does a dog make?",
      "Woof",
      "Meow",
      "Moo",
      "Baaa",
      "A",
      "The correct answer is woof",
    ],
    [
      "Q3: What is the first letter of the alphabet?",
      "Z",
      "O",
      "I",
      "A",
      "D",
      "Not quite, the answer is A",
    ],
    [
      "Q4: What word rhymes with cat?",
      "Hat",
      "Chocolate",
      "Chicken Nugget",
      "Dog",
      "A",
      "The correct answer is Hat",
    ],
    [
      "Q5: What do we call a baby dog?",
      "Kitten",
      "Puppy",
      "Doggy",
      "Pug",
      "B",
      "Thats not right, the answer is puppy",
    ],
  ],
  health: [
    [
      "Q1: What is the best way to take care of your teeth?",
      "Eating sweets",
      "Brush twice a day",
      "Drink fizzy drinks",
      "Never brushing",
      "B",
      "Thats not right, the answer is brushing them twice a day",
    ],
    [
      "Q2: How much water should you drink a day?",
      "None",
      "20 glasses",
      "5-8 glasses",
      "1 glass",
      "C",
      "Unlucky, the answer is 5-8 glasses a day for children between ages 5-10",
    ],
    [
      "Q3: What kind of food is a carrot",
      "Vegetable",
      "Meat",
      "Fruit",
      "Fish",
      "A",
      "Not quite, the answer is A, vegetable",
    ],
    [
      "Q4: What should you always do before eating?",
      "Do a dance",
      "Take shoes off",
      "Brush your teeth",
      "Wash your hands",
      "D",
      "The answer is wash your hands",
    ],
    [
      "Q5: What is the best way to stay active?",
      "Watch TV",
      "Play sports",
      "Play video games",
      "Read books",
      "B",
      "Thats not quite right, the answer is playing sports",
    ],
  ],
  history: [
    [
      "Q1: What is the capital of Scotland?",
      "Aberdeen",
      "Inverness",
      "Edinburgh",
      "Glasgow",
      "C",
      "Not quite, the capital of Scotland is Edinburgh",
    ],
    [
      "Q2: Who is Scotlands current First Minister",
      "Rishi Sunak",
      "Humza Yousaf",
      "Gerry Cinnamon",
      "Ewan MacGregor",
      "B",
      "Close, but the answer is actually Humza Yousaf",
    ],
    [
      "Q3: How many people live in Scotland roughly?",
      "5 million",
      "10 million",
      "1 million",
      "100 million",
      "A",
      "The correct answer is 5 million",
    ],
    [
      "Q4: What is the traditional dress of Scotland called?",
      "Tuxedo",
      "Skirt",
      "Blazer",
      "Kilt",
      "D",
      "The correct answer is a kilt",
    ],
    [
      "Q5: What is the national animal of Scotland?",
      "Unicorn",
      "Loch Ness Monster",
      "Deer",
      "Haggis",
      "A",
      "The correct answer is actually a unicorn",
    ],
  ],
  maths: [
    [
      "Q1: What is 2 + 2?",
      "3",
      "4",
      "5",
      "10",
      "B",
      "Close, but 2 + 2 is actually 4",
    ],
    ["Q2: How many sides does a triangle have?", "1", "2", "3", "4", "C", "Unlucky the answer is 3"],
    ["Q3: What is 5 + 5?", "55", "20", "10", "6", "C", "The correct answer is 10"],
    ["Q4: What is 3 + 2?", "4", "5", "6", "7", "B", "Close but 3 + 2 is 5"],
    [
      "Q5: What is 2 - 1?",
      "0",
      "10",
      "21",
      "1",
      "D",
      "Unlucky, 2 - 2 is 1",
    ],
  ],
};


var userAge;
var quizChoice = localStorage.getItem("quizChoice");
var questions = quizQuestions[quizChoice];
var questions1 = quizQuestions1[quizChoice];

//these functions will get the value of the subject chosen from user click and store as a variable for use later on when loading questions and formatting

function mathSelect() {
  var quizChoice = document.querySelector(".mathQ").textContent.toLowerCase();
  localStorage.setItem("quizChoice", quizChoice);
}

function englishSelect() {
  var quizChoice = document
    .querySelector(".englishQ")
    .textContent.toLowerCase();
  localStorage.setItem("quizChoice", quizChoice);
}

function healthSelect() {
  var quizChoice = document.querySelector(".healthQ").textContent.toLowerCase();
  localStorage.setItem("quizChoice", quizChoice);
}

function historySelect() {
  var quizChoice = document
    .querySelector(".historyQ")
    .textContent.toLowerCase();
  localStorage.setItem("quizChoice", quizChoice);
}

function socialSelect() {
  var quizChoice = document.querySelector(".socialQ").textContent.toLowerCase();
  localStorage.setItem("quizChoice", quizChoice);
}

//arrays storing the order of the quizzes and the colours corresponding to them for formatting purposes and so they can be used in various loops so not repeating code

var quizChoices = ["maths", "english", "health", "history", "social"];
var colors = [
  ["#f34c78", "#fab7c9", "#f34c78"],
  ["#084f8c", "#9cb9d1", "#5284af"],
  ["#0cb1f2", "#86d8f9", "#0cb1f2"],
  ["#f2a71b", "#f9d38d", "#f2a71b"],
  ["#27ec23", "#93f691", "#68f265"],
];

// this function loads the questions based on the user click from the quiz choice page it also matches the background color to the quiz choice

function loadQuestionsAndAnswers() {
  // get quiz chocie and age from local storage
  var quizChoice = localStorage.getItem("quizChoice");
  var userAge = localStorage.getItem("userAge");

  //this updates the title dependent on user choice

  document.getElementById("quizHeader").innerHTML =
    quizChoice.toUpperCase() + " QUIZ";

  document.getElementById("welcome").innerHTML =
    "Welcome " + getCookie("name").toUpperCase();

  //this sets the styles on the quiz page using the arrays with the storede subjects and colours being used, a for loop is then used to update dependent. The arrays are used to style the certificates as well in the formatPDF function
  //CSS id's being updated are custom properties defined in CSS root so that all the boxes update not just one with #id

  if (userAge <= 8) {
    for (let i = 0; i < quizChoices.length; i++) {
      if (quizChoice == quizChoices[i]) {
        document.getElementById("quizBody").style.backgroundColor =
          colors[i][0];

        //this changes the default root colour in css which in turn updates all the elements with that root colour set
        document.documentElement.style.setProperty("--questions", colors[i][1]);
        document.documentElement.style.setProperty("--answers", colors[i][2]);
      }
    }

    //This loads the questions

    for (i = 0; i < questions.length; i++) {
      document.getElementById("q" + i).innerHTML = questions[i][0];

      document.getElementById("q" + i + "a").innerHTML = questions[i][1];
      document.getElementById("q" + i + "b").innerHTML = questions[i][2];
      document.getElementById("q" + i + "c").innerHTML = questions[i][3];
      document.getElementById("q" + i + "d").innerHTML = questions[i][4];
    }
  } else {
    for (let i = 0; i < quizChoices.length; i++) {
      if (quizChoice == quizChoices[i]) {
        document.getElementById("quizBody").style.backgroundColor =
          colors[i][0];

        //this changes the default root colour in css which in turn updates all the elements with that root cour set
        document.documentElement.style.setProperty("--questions", colors[i][1]);
        document.documentElement.style.setProperty("--answers", colors[i][2]);
      }
    }

    //This loads the questions

    for (i = 0; i < questions.length; i++) {
      document.getElementById("q" + i).innerHTML = questions1[i][0];

      document.getElementById("q" + i + "a").innerHTML = questions1[i][1];
      document.getElementById("q" + i + "b").innerHTML = questions1[i][2];
      document.getElementById("q" + i + "c").innerHTML = questions1[i][3];
      document.getElementById("q" + i + "d").innerHTML = questions1[i][4];
    }
  }
}

//checks answers using a for loop taking the correct answer from the object (stored in position 5) and comparing to the value of the radio button. feedback is then given which is also stored in the object at position 6
function checkAnswers() {
  var totalScore = 0;

  if (userAge <= 8){
   
  for (i = 0; i < questions.length; i++) {
    var selectedAnswer = document.querySelector(
      'input[name="q' + i + '"]:checked'
    ).value;

    if (selectedAnswer == questions[i][5]) {
      document.getElementById("q" + i + "feedback").innerHTML = "Correct";
      document.getElementById("question" + i).style.backgroundColor =
        "#34C200";

      totalScore++;
    } else {
      document.getElementById("q" + i + "feedback").innerHTML = questions[i][6];
      document.getElementById("question" + i).style.backgroundColor = "#b31c00";
    }
  }

  document.getElementById("feedback").innerHTML =
    "You got " + totalScore + " out of " + questions.length + " correct!";

  if (totalScore >= 3) {
    document.getElementById("certificate").style.visibility = "visible";
  }
}

// check answers for older quiz questions
else{
  
   
    for (i = 0; i < questions.length; i++) {
      var selectedAnswer = document.querySelector(
        'input[name="q' + i + '"]:checked'
      ).value;
  
      if (selectedAnswer == questions1[i][5]) {
        document.getElementById("q" + i + "feedback").innerHTML = "Correct";
        document.getElementById("question" + i).style.backgroundColor =
          "#568f56";
  
        totalScore++;
      } else {
        document.getElementById("q" + i + "feedback").innerHTML = questions1[i][6];
        document.getElementById("question" + i).style.backgroundColor = "#b31c00";
      }
    }
  
    document.getElementById("feedback").innerHTML =
      "You got " + totalScore + " out of " + questions1.length + " correct!";
  
    if (totalScore >= 3) {
      document.getElementById("certificate").style.visibility = "visible";
    }
}
}


//LOGIN PAGE CHECKS

var userAge = localStorage.getItem("userAge");
var selectedAvatar = localStorage.getItem("selectedAvatar");

//THIS FUNCTION CHECKS TO MAKES SURE EMAIL HAS AN @ SIGN AND GIVES A WARNING IF AN AGE OF 12 OR ABOVE IS ENTERED.

function loginCheck() {
  var regExpression =
    /^([a-zA-Z0-9\._-]+)@([a-zA-Z0-9])+.(.[a-zA-Z]+)+.(.[a-zA-Z]+)?$/;

  var emailCheck = document.getElementById("email").value;
  var ageCheck = document.getElementById("age").value;

  if (regExpression.test(emailCheck) && ageCheck <= 11) {
    Swal.fire({
      icon: "info",
      title: "Thank you for entering your details",
      text: "Quiz choices will load in 5 seconds....",
      showConfirmButton: false,
    });
    setTimeout(detailSelect, 5000);
    // detailSelect();
  } else if (regExpression.test(emailCheck) && ageCheck >= 12) {
    Swal.fire({
      icon: "warning",
      title: "You may find the quizzes too easy!",
      text: "Quiz choices will load in 5 seconds....",
      showConfirmButton: false,
    });
    setTimeout(detailSelect, 5000);
  } else {
    Swal.fire({
      icon: "error",
      title: "Oops...",
      text: "Your email isnt valid!",
      confirmButtonColor: "#0cb1f2",
    });
  }
}

function detailSelect() {
  var userAge = document.getElementById("age").value;

  var selectedAvatar = document.querySelector(
    "input[name=avatar]:checked"
  ).value;

  //use local storage so it can be used across the App
  localStorage.setItem("userAge", userAge);
  localStorage.setItem("selectedAvatar", selectedAvatar);
  // alert(userAge);
  setCookie("name", "nvalue");
  window.location.href = "./quiz_choice.html";
}

function clearInput() {
  document.getElementById("age").value = "";
  document.getElementById("name").value = "";
  document.getElementById("email").value = "";
}

//quiz Choice page

//show correct avatar on page

function showAvatar() {
  var selectedAvatar = localStorage.getItem("selectedAvatar");

  if (selectedAvatar == "monkey") {
    document.querySelector(".monkeyProfile").style.visibility = "visible";
  }

  if (selectedAvatar == "duck") {
    document.querySelector(".duckProfile").style.visibility = "visible";
  }

  if (selectedAvatar == "owl") {
    document.querySelector(".owlProfile").style.visibility = "visible";
  }

  if (selectedAvatar == "frog") {
    document.querySelector(".frogProfile").style.visibility = "visible";
  }
}

//COOKIES functions

function setCookie(cname, cvalue) {
  cvalue = document.getElementById("name").value;
  document.cookie = cname + " = " + cvalue;
}

function getCookie(cname) {
  var name = cname + "=";

  var decodedCookie = decodeURIComponent(document.cookie);

  var ca = decodedCookie.split(";");

  for (var i = 0; i < ca.length; i++) {
    var c = ca[i];

    c = c.trim();

    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }

  return "Name not found";
}

function checkCookie() {
  document.getElementById("display").innerHTML =
    "Welcome " +
    getCookie("name").toUpperCase() +
    ", today's date is " +
    new Date().toDateString() +
    ". You have chosen questions suited to age " +
    userAge +
    ".";
}

//TIME AND DATE functions

function displayDate() {
  document.getElementById("date").innerHTML = new Date().toLocaleDateString(
    "en-gb"
  );
}

function displayTime() {
  var today = new Date();
  var h = today.getHours() % 12 || 12; //LAST PART IS TO DISPLAY AS 12HR CLOCK
  var m = today.getMinutes();
  var s = today.getSeconds();
  m = checkTime(m);
  s = checkTime(s);
  document.getElementById("time").innerHTML = h + ":" + m + ":" + s;
  setTimeout(displayTime, 1000);
}

function checkTime(i) {
  if (i < 10) {
    i = "0" + i;
  }
  // this adds zero in front of numbers less than 10
  return i;
}

// function that formats the certificate based on the quiz colours - uses the array previously defined and is prety much the same code used in teh loadQuestionsandAnswers function

function formatCertificate() {
  var quizChoice = localStorage.getItem("quizChoice");

  document.getElementById("userName").innerHTML =
    getCookie("name").toUpperCase();

  document.getElementById("subject").innerHTML =
    "COMPLETED THE " + quizChoice + " QUIZ";

  for (let i = 0; i < quizChoices.length; i++) {
    if (quizChoice == quizChoices[i]) {
      //this changes the defualt root colour in css which in turn updates all the elements with that root cour set
      document.documentElement.style.setProperty("--questions", colors[i][1]);
      document.documentElement.style.setProperty("--answers", colors[i][2]);
    }
  }
}

function clearAnswers() {
  var elements = document.getElementsByTagName("input");

  for (var i = 0; i < elements.length; i++) {
    if (elements[i].type == "radio") {
      elements[i].checked = false;
    }
  }
}
